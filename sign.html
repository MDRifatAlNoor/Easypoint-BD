<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easypoint BD | Sign Up</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  font-family:'Montserrat',sans-serif;
  padding-top:80px;
  background:radial-gradient(circle at top,#eef2ff,#f0f2f5);
}
.navbar{ background:#0f172a; box-shadow:0 10px 25px rgba(0,0,0,.4); }
.navbar-brand{ font-weight:800; font-size:1.8rem; color:#ff416c!important; }
.nav-link{ color:#fff!important; }
.signup-card{
  background:#fff;
  border-radius:20px;
  padding:40px;
  box-shadow:0 25px 60px rgba(0,0,0,.15);
}
.btn-primary{
  background:linear-gradient(45deg,#ff416c,#ff4b2b);
  border:none;
  padding:12px;
  border-radius:30px;
}

/* Toast Notifications */
.toast-container{
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1055;
}
</style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="container">
    <a class="navbar-brand" href="index.html">Easypoint BD</a>

  </div>
</nav>

<!-- SIGNUP -->
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="signup-card mt-5">
        <h3 class="text-center mb-4">Create Account</h3>

        <form id="signupForm">
          <div class="mb-3">
            <label class="form-label">Full Name</label>
            <input id="name" type="text" class="form-control" required>
          </div>

          <div class="mb-3">
            <label class="form-label">Email</label>
            <input id="email" type="email" class="form-control" required>
          </div>

          <div class="mb-3">
            <label class="form-label">Password</label>
            <input id="password" type="password" class="form-control" required>
          </div>

          <div class="mb-3">
            <label class="form-label">Confirm Password</label>
            <input id="confirmPassword" type="password" class="form-control" required>
          </div>

          <button type="submit" class="btn btn-primary w-100">
            Sign Up
          </button>
        </form>

        <p class="text-center mt-3">
          Already have an account?
          <a href="signin.html"  style="text-decoration: none;"><b>Login</b></a>
        </p>
      </div>
    </div>
  </div>
</div>

<!-- TOAST CONTAINER -->
<div class="toast-container" id="toastContainer"></div>

<!-- FIREBASE AUTH -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, updateProfile } 
  from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyApZK1uKspkk_yu8mCKDH44rDnmJzjvv00",
    authDomain: "myshop-f7a03.firebaseapp.com",
    projectId: "myshop-f7a03",
    storageBucket: "myshop-f7a03.firebasestorage.app",
    messagingSenderId: "793564064034",
    appId: "1:793564064034:web:fcc5230ff28a5ee8005d7b"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const form = document.getElementById("signupForm");

  form.addEventListener("submit", e => {
    e.preventDefault();

    const name = document.getElementById("name").value;
    const email = document.getElementById("email").value;
    const pass = document.getElementById("password").value;
    const confirm = document.getElementById("confirmPassword").value;

    if (pass !== confirm) {
      showToast("Passwords do not match", "danger");
      return;
    }

    createUserWithEmailAndPassword(auth, email, pass)
      .then(userCredential => {
        return updateProfile(userCredential.user, { displayName: name });
      })
      .then(() => {
        showToast("Account created successfully!", "success");
        setTimeout(() => window.location.href = "user-dashboard.html", 1500);
      })
      .catch(error => {
        showToast(error.message, "danger");
      });
  });

  // ---------------- Toast Function ----------------
  function showToast(message, type="success") {
    const container = document.getElementById("toastContainer");

    const toastEl = document.createElement("div");
    toastEl.className = `toast align-items-center text-bg-${type} border-0 mb-2`;
    toastEl.setAttribute("role", "alert");
    toastEl.setAttribute("aria-live", "assertive");
    toastEl.setAttribute("aria-atomic", "true");

    toastEl.innerHTML = `
      <div class="d-flex">
        <div class="toast-body">${message}</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
      </div>
    `;

    container.appendChild(toastEl);

    const toast = new bootstrap.Toast(toastEl, { delay: 2000 });
    toast.show();

    // Remove after hidden
    toastEl.addEventListener("hidden.bs.toast", () => {
      toastEl.remove();
    });
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>